<!DOCTYPE html>
<html lang="ja-JP">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" type="image/x-icon" href="https://github.com/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="/style.css" media="all" />
    <link rel="alternate" type="application/rss+xml" title="notions:iaarchiver - feed" href="/index.xml" />
    <title>notions:iaarchiver</title> 
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-42298279-1', 'iaarchiver.github.io');
      ga('send', 'pageview');
    </script>
</head>
  <body>
    <!-- .sidebar -->
    <div class="sidebar">
      <ul class="sidebar-nav">
        <li><a href="/"><span class="websymbolsliga icon boxedlist"></span></a></li>
        <li><a href="#" class="show-archive"><span class="websymbolsliga icon folder"></span></a></li>
      </ul>
      <hr>
      <ul class="sidebar-list">
      
        <li>
          <a href="/posts/2013-07-08-1730.html">Ubuntuでmpdのセットアップ</a>
        </li>
      
        <li>
          <a href="/posts/2013-07-08-2117.html">grunt-contrib-copyでのパス指定</a>
        </li>
      
      </ul>
    </div>
    <!-- [END] .sidebar -->

    <!-- .wrapper -->
    <div class="wrapper" style="height:100%">
    <!-- .logo -->
    <div class="logo">notions :: iaarchiver</div>
    <!-- [END] .logo -->
    <div class="post">
  <div class="post-info">
  <h1><a href="/posts/2013-07-08-2117.html">grunt-contrib-copyでのパス指定</a></h1>
  <span class="date">July 8th 2013</span>
  <span class="author"></span>
  <hr>
  </div>
  <div class="post-content">
    <p><a href="https://github.com/gruntjs/grunt-contrib-copy/issues/60">https://github.com/gruntjs/grunt-contrib-copy/issues/60</a></p>
<p>GithubのIssueでも語られていますが，grunt-contrib-copyのパスの指定方法に注意が必要だったのでメモします．</p>
<p>指定フォルダ内のファイルを階層を維持しながら別の場所へコピーしたい場合<code>cp path/* dest/</code>のつもりで以下のように指定すると思った通りのパスへコピーしてくれません．</p>
<pre><code>    <span class="method">copy:</span> {
        <span class="method">dame1:</span> {
            //ダメ
            <span class="method">files:</span> [{<span class="method">src:</span> <span class="string">'path/**'</span>, <span class="method">dest:</span> <span class="string">'dest/'</span>}]
        },
        <span class="method">dame2:</span> {
            // これもダメ
            <span class="method">files:</span> [{<span class="method">expand:</span> <span class="keyword">true</span>, <span class="method">src:</span> [<span class="string">'path/**'</span>], <span class="method">dest:</span> <span class="string">'dest/'</span>}]
        }
    }</code></pre>
<p>上記コードでは<code>dest/path/</code>内に階層を維持しながらファイルがコピーされてしまいます．</p>
<p>正しくは，</p>
<pre><code>    <span class="method">copy:</span> {
        <span class="method">ok:</span> {
            <span class="method">files:</span> [{<span class="method">expand:</span> <span class="keyword">true</span>, <span class="method">cwd:</span> <span class="string">'path/'</span>, <span class="method">src:</span> [**], <span class="method">dest:</span> <span class="string">'dest/'</span>}]
        }
    }</code></pre>
<p>expandオプションがあると，もし中間のティレクトリが存在しなければ作成してくれます．（mkdirの-pオプション相当）ちなみにこれは<code>cwd</code>オプションでカレントディレクトリを指定した場合のみ有効なオプションのようです．</p>

  </div>

  <div class="navigation">
      
      
        <span class="older"><a href="/posts/2013-07-08-1730.html">older&nbsp;&#8674;</a></span>
      
    </div>
  <div class="comments">
    
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        window.disqus_identifier="";
        window.disqus_url="http://iaarchiver.github.io/posts/2013-07-08-2117.html";
        window.disqus_title="grunt-contrib-copyでのパス指定";
      </script>
        <script type="text/javascript" src="http://disqus.com/forums/iaarchiver/embed.js"></script>
        <noscript><a href="http://iaarchiver.disqus.com/?url=ref">View the discussion thread.</a></noscript>
    
  </div>
</div>


      <div class="footer">
      Copyright iaarchiver, 2013.
      </div>
    </div>
    <!-- [END] .wrapper -->

    <!-- load JS -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript" src="/scripts.js"></script>
  </body>
</html>
